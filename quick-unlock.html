<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Quick Unlock — SuperEdu</title>

<!-- icons -->
<link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16.png">
<link rel="icon" type="image/png" sizes="192x192" href="/assets/icons/android-chrome-192.png">
<link rel="icon" type="image/png" sizes="512x512" href="/assets/icons/android-chrome-512.png">
<link rel="icon" href="/assets/icons/favicon.ico">

<link rel="stylesheet" href="/assets/css/main.css">
<script src="/assets/js/menu.js" defer></script>
<script src="/assets/js/lang.js" defer></script>

<style>
body {
  font-family: Inter, Arial, sans-serif;
  background: #FAF5E9;
  margin: 0;
}
.quick-wrap {
  max-width: 600px;
  margin: 140px auto 60px;
  padding: 0 20px;
}
.quick-title {
  text-align: center;
  margin-bottom: 28px;
}
.quick-title h1 {
  margin: 0;
  font-size: 36px;
  color: #2C9C47;
  font-weight: 400;
  font-family: "Segoe UI", Arial, sans-serif;
}
.quick-title p {
  margin-top: 10px;
  color: #555;
  font-size: 16px;
}

.quick-card {
  background: linear-gradient(145deg, #ffffff, #f4f8ff);
  padding: 28px;
  border-radius: 16px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.06);
  transition: all 0.22s;
}
.quick-card:hover {
  transform: translateY(-4px) scale(1.03);
  box-shadow: 0 10px 28px rgba(0,0,0,0.12);
  border: 2px solid #4B89FF;
}
.quick-card label {
  display: block;
  margin-top: 14px;
  font-weight: 600;
  font-size: 14px;
}
.quick-card input {
  width: 100%;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #e0e0e0;
  margin-top: 6px;
  font-size: 15px;
}
.quick-card .btn {
  margin-top: 18px;
  width: 100%;
  display: flex;
  justify-content: center;
}
.notice {
  font-size: 13px;
  color: #888;
  margin-top: 10px;
  text-align: center;
}
.success-msg {
  text-align: center;
  color: #2C9C47;
  font-weight: 600;
  margin-top: 18px;
}
</style>
</head>

<body>

<!-- NAV -->
<nav id="topNav" class="nav--transparent">
  <div class="nav-inner">
    <div class="brand">
      <a href="/index.html#home" class="brand">
        <img src="/assets/img/superedu-logo.png" alt="SuperEdu" class="logo-img" />
        <span class="brand-text">SuperEdu</span>
      </a>
    </div>

    <div class="menu" id="menu">
      <a href="/index.html#home" data-en="Home" data-zh="首页">Home</a>
      <a href="/index.html#services" data-en="Services" data-zh="服务">Services</a>
      <a href="/membership.html" data-en="EduCenter" data-zh="教育中心">EduCenter</a>
      <a href="#" data-en="EduCommunity" data-zh="教育社区">EduCommunity</a>
      <a href="/membership.html" data-en="Membership" data-zh="会员">Membership</a>
      <a href="/index.html#resources" data-en="Resources" data-zh="资源">Resources</a>
      <a href="/index.html#contact" data-en="Contact" data-zh="联系">Contact</a>
      <a href="/login.html" data-en="Login" data-zh="登录">Login</a>
      <span class="nav-underline"></span>
    </div>

    <div class="nav-right">
      <button id="langToggle" class="lang-toggle">中文</button>
      <button id="hamburger" class="hamburger"><span></span><span></span><span></span></button>
    </div>
  </div>

  <div id="mobileMenu" class="mobile-menu" aria-hidden="true">
      <a href="/index.html#home" data-en="Home" data-zh="首页">Home</a>
      <a href="/index.html#services" data-en="Services" data-zh="服务">Services</a>
      <a href="/membership.html" data-en="EduCenter" data-zh="教育中心">EduCenter</a>
      <a href="#" data-en="EduCommunity" data-zh="教育社区">EduCommunity</a>
      <a href="/membership.html" data-en="Membership" data-zh="会员">Membership</a>
      <a href="/index.html#resources" data-en="Resources" data-zh="资源">Resources</a>
      <a href="/index.html#contact" data-en="Contact" data-zh="联系">Contact</a>
      <a href="/login.html" data-en="Login" data-zh="登录">Login</a>
  </div>
</nav>

<!-- MAIN CONTENT -->
<div class="quick-wrap">
  <div class="quick-title">
    <h1 data-en="Quick Unlock" data-zh="快速解锁">Quick Unlock</h1>
    <p data-en="Enter your name and email to instantly unlock access." data-zh="输入姓名和邮箱以立即解锁。">
      Enter your name and email to instantly unlock access.
    </p>
  </div>

  <div class="quick-card">
    <label for="qName" data-en="Name" data-zh="姓名">Name</label>
    <input type="text" id="qName" placeholder="Your Name" />

    <label for="qEmail" data-en="Email" data-zh="邮箱">Email</label>
    <input type="email" id="qEmail" placeholder="you@example.com" />

    <button class="btn btn-primary" id="submitUnlock" data-en="Unlock Now" data-zh="立即解锁">Unlock Now</button>
    <div class="notice" id="formNotice"></div>
    <div class="success-msg" id="successMsg" style="display:none;">
      Access unlocked! <button class="btn btn-outline" id="goEdu">Go to EduCenter</button>
    </div>
  </div>
</div>

<script>
document.getElementById('submitUnlock').addEventListener('click', async function() {
  const name = document.getElementById('qName').value.trim();
  const email = document.getElementById('qEmail').value.trim();
  const notice = document.getElementById('formNotice');
  const successMsg = document.getElementById('successMsg');

  notice.textContent = '';
  successMsg.style.display = 'none';

  if(!name || !email){
    notice.textContent = "Please enter both name and email / 请填写姓名和邮箱";
    return;
  }

  // Email format validation
  const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if(!emailPattern.test(email)){
    notice.textContent = "Please enter a valid email / 请输入有效邮箱";
    return;
  }

  // Submit to Cloudflare API
  try {
    const res = await fetch('/api/unlock.js', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({name,email})
    });

    if(res.ok){
      // Mark Quick Unlock in LocalStorage
      localStorage.setItem('quickUnlocked', 'true');
      localStorage.setItem('quickUnlockedName', name);
      localStorage.setItem('quickUnlockedEmail', email);

      successMsg.style.display = 'block';
    } else {
      const data = await res.json();
      notice.textContent = data.error || "Failed to unlock / 解锁失败";
    }
  } catch(err){
    notice.textContent = "Network error / 网络错误";
    console.error(err);
  }
});

// Go to EduCenter
document.getElementById('goEdu').addEventListener('click', function(){
  window.location.href = '/education.html';
});
</script>

</body>
</html>
