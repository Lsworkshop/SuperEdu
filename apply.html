<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Apply for Services ‚Äî SuperEdu</title>

<!-- icons (same as index.html) -->
<link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16.png">
<link rel="icon" type="image/png" sizes="192x192" href="/assets/icons/android-chrome-192.png">
<link rel="icon" type="image/png" sizes="512x512" href="/assets/icons/android-chrome-512.png">
<link rel="icon" href="/assets/icons/favicon.ico">


<style>
  :root {
    --brand-gold:#D8B04C;
    --brand-green:#2C9C47;
    --bg:#FAF5E9;
    --text:#333;
  }

  body {
    margin:0;
    font-family:Inter,Arial,sans-serif;
    background:var(--bg);
    color:var(--text);
    -webkit-font-smoothing:antialiased;
  }

  .header {
    display:flex;
    justify-content:center;
    padding:22px 0 10px;
  }

  .header img {
    width:110px;
    height:auto;
  }

  .container {
    max-width:820px;
    margin:20px auto;
    padding:16px;
  }

  .card {
  background: linear-gradient(
    135deg,
    #ffffff 0%,
    #fbf7ef 55%,
    #f3ebdd 100%
  );
  border-radius: 16px;
  padding: 32px;
  box-shadow: 0 14px 36px rgba(0,0,0,0.12);
  border: 1px solid rgba(160,140,110,0.25);
  }

  h1 {
    margin:0 0 10px;
    color:var(--brand-green);
  }

  label {
    display:block;
    margin-top:12px;
    font-size:14px;
    font-weight:600;
  }

  input, textarea {
    width:100%;
    padding:10px;
    border-radius:8px;
    border:1px solid #e8e8e8;
    margin-top:6px;
    font-size:15px;
  }

  .btn {
    background:var(--brand-green);
    color:#fff;
    padding:12px 14px;
    border-radius:10px;
    border:none;
    margin-top:14px;
    cursor:pointer;
    font-weight:700;
    font-size:15px;
    display:inline-flex;
    align-items:center;
    justify-content:center;
  }

  .btn.btn-ghost {
    background:transparent;
    color:var(--brand-green);
    border:2px solid rgba(44,156,71,0.12);
  }

  .small {
    font-size:13px;
    color:#7a7a7a;
    margin-top:8px;
  }

  /* ====== PERFECT TWO-COLUMN CHECKBOX GRID ====== */
  .services-checkbox-grid {
    display:grid;
    grid-template-columns:repeat(2,1fr);
    column-gap:24px;
    row-gap:12px;
    margin-top:10px;
  }

  .services-checkbox-grid label {
    display:flex;
    gap:8px;
    align-items:center;
    font-size:14px;
    line-height:1.3;
    cursor:pointer;
  }

  .services-checkbox-grid input[type="checkbox"] {
    width:18px;
    height:18px;
  }

  /* small responsive tweak */
  @media (max-width:720px){
    .services-checkbox-grid { grid-template-columns:1fr; }
  }
</style>

<link rel="stylesheet" href="/assets/css/main.css">
<script src="/assets/js/menu.js" defer></script>
<script src="/assets/js/lang.js" defer></script>

</head>

<body class="page-apply">

<!-- NAV -->
<nav id="topNav" class="nav--transparent">
  <div class="nav-inner">
    
    <!-- Logo -->
    <div class="brand">
      <a href="/index.html#home" class="brand">
        <img src="/assets/img/superedu-logo.png" alt="SnovaEdu" class="logo-img" />
        <span class="brand-text">SnovaEdu</span>
      </a>
    </div>

    <!-- Desktop Menu -->
    <div class="menu" id="menu">
      <a href="/index.html#home" data-en="Home" data-zh="È¶ñÈ°µ">Home</a>
      <a href="/index.html#services" data-en="Services" data-zh="ÊúçÂä°">Services</a>

      <a href="/index.html#services" data-en="EduCenter" data-zh="ÊïôËÇ≤‰∏≠ÂøÉ">EduCenter</a>
      <a href="#" data-en="EduCommunity" data-zh="ÊïôËÇ≤Á§æÂå∫">EduCommunity</a>

      <a href="/membership.html" data-en="Membership" data-zh="‰ºöÂëò">Membership</a>

      <a href="/index.html#resources" data-en="Resources" data-zh="ËµÑÊ∫ê">Resources</a>
      <a href="/index.html#contact" data-en="Contact" data-zh="ËÅîÁ≥ª">Contact</a>

      <a href="/login.html" data-en="Login" data-zh="ÁôªÂΩï">Login</a>

      <!-- SLIDE UNDERLINE -->
      <span class="nav-underline"></span>
    </div>

    <!-- Right side -->
    <div class="nav-right">
      <button id="langToggle" class="lang-toggle" aria-label="Language toggle">‰∏≠Êñá</button>
      <button id="hamburger" class="hamburger" aria-label="Menu">
        <span></span><span></span><span></span>
      </button>
    </div>
  </div>

  <!-- Mobile slide menu -->
  <div id="mobileMenu" class="mobile-menu" aria-hidden="true">
      <a href="/index.html#home" data-en="Home" data-zh="È¶ñÈ°µ">Home</a>
      <a href="/index.html#services" data-en="Services" data-zh="ÊúçÂä°">Services</a>

      <a href="/index.html#services" data-en="EduCenter" data-zh="ÊïôËÇ≤‰∏≠ÂøÉ">EduCenter</a>
      <a href="#" data-en="EduCommunity" data-zh="ÊïôËÇ≤Á§æÂå∫">EduCommunity</a>

      <a href="/membership.html" data-en="Membership" data-zh="‰ºöÂëò">Membership</a>

      <a href="/index.html#resources" data-en="Resources" data-zh="ËµÑÊ∫ê">Resources</a>
      <a href="/index.html#contact" data-en="Contact" data-zh="ËÅîÁ≥ª">Contact</a>

      <a href="/login.html" data-en="Login" data-zh="ÁôªÂΩï">Login</a>

      <div class="mobile-actions">
        <button class="btn btn-ghost" id="mobileRegister" data-en="Register / Join" data-zh="Ê≥®ÂÜå / Âä†ÂÖ•">Register / Join</button>
        <button class="btn" id="mobileUnlock" data-en="Unlock Education" data-zh="Ëß£ÈîÅÊïôËÇ≤">Unlock Education</button>
      </div>
  </div>

</nav>



<div class="container">
  <div class="card">

    <h1 data-en="Service Application" data-zh="ÊúçÂä°Áî≥ËØ∑">Service Application</h1>
    <p class="small" data-en="Please provide your details and select the services you are interested in."
       data-zh="ËØ∑ËæìÂÖ•ÊÇ®ÁöÑ‰ø°ÊÅØÂπ∂ÈÄâÊã©ÊÇ®ÊÑüÂÖ¥Ë∂£ÁöÑÊúçÂä°„ÄÇ">
       Please provide your details and select the services you are interested in.
    </p>

    <form id="applyForm">

      <label for="firstName" data-en="First name" data-zh="Âêç">First name</label>
      <input id="firstName" name="firstName" required />

      <label for="lastName" data-en="Last name" data-zh="Âßì">Last name</label>
      <input id="lastName" name="lastName" required />

      <label for="email" data-en="Email" data-zh="ÈÇÆÁÆ±">Email</label>
      <input id="email" name="email" type="email" required />

      <label for="phone" data-en="Phone (optional)" data-zh="ÁîµËØùÔºàÂèØÈÄâÔºâ">Phone (optional)</label>
      <input id="phone" name="phone" />

      <label for="country" data-en="Country / Region" data-zh="ÂõΩÂÆ∂ / Âú∞Âå∫">Country / Region</label>
      <input id="country" name="country" />

      <label data-en="Select service(s) of interest" data-zh="ÈÄâÊã©ÊÑüÂÖ¥Ë∂£ÁöÑÊúçÂä°">Select service(s) of interest</label>
      <div class="services-checkbox-grid" id="servicesList"></div>

      <label for="notes" data-en="Additional notes (optional)" data-zh="ÈôÑÂä†ËØ¥ÊòéÔºàÂèØÈÄâÔºâ">Additional notes (optional)</label>
      <textarea id="notes" name="notes" rows="4"></textarea>

      <div style="display:flex;gap:10px;align-items:center">
        <button type="submit" class="btn" id="submitBtn"
                data-en="Submit Application" data-zh="Êèê‰∫§Áî≥ËØ∑">Submit Application</button>
        <div id="formStatus" class="small"></div>
      </div>

    </form>
  </div>
</div>

<script>
/* ===============================
      Service Labels List
================================ */
const serviceItems = [
  {id:'s1', en:'üéì Education Affordability & Funding Support', zh:'üéì ÊïôËÇ≤ÂèØË¥üÊãÖÊÄß‰∏éËµÑÂä©ÊîØÊåÅ'}, 
  <p data-en="U.S. Education & Comparative Analysis." data-zh="ÁæéÂõΩÊïôËÇ≤‰ΩìÁ≥ª‰∏éÊØîËæÉÂàÜÊûê"> Education</p>

  {id:'s2', en:'College Application Strategy & Planning', zh:'Â§ßÂ≠¶Áî≥ËØ∑Á≠ñÁï•‰∏éËßÑÂàí'},
  {id:'s3', en:'Pre-College Profile Development (AP/Summer Programs)', zh:'Â§ßÂ≠¶ÂâçËÉåÊôØÊâìÈÄ†ÔºàAP/Â§èÊ†°Ôºâ'},
  {id:'s4', en:'Financial Aid (FAFSA/CSS) ‚Äî One-on-One', zh:'Âä©Â≠¶ÈáëÔºàFAFSA/CSSÔºâ‰∏ÄÂØπ‰∏ÄËæÖÂØº'},
  {id:'s5', en:'Scholarship Application Support', zh:'Â•ñÂ≠¶ÈáëÁî≥ËØ∑ËæÖÂØº'},
  {id:'s6', en:'Family & Long-term Education Planning', zh:'ÂÆ∂Â∫≠‰∏éÈïøÊúüÊïôËÇ≤ËßÑÂàí'},
  {id:'s7', en:'Education Savings & Tax (ESA / 529)', zh:'ÊïôËÇ≤ÂÇ®ËìÑ‰∏éÁ®éÂä°ÔºàESA / 529Ôºâ'},
  {id:'s8', en:'College Fund Design & Financial Strategy', zh:'Â§ßÂ≠¶Âü∫ÈáëËÆæËÆ°‰∏éËµÑÈáëÁ≠ñÁï•'},
  {id:'s9', en:'Family Foundation / 501(c)(3) Setup', zh:'ÂÆ∂Â∫≠Âü∫Èáë‰ºö / 501(c)(3) ËÆæÁ´ãËæÖÂØº'},
  {id:'s10', en:'Education + Wealth & Trust Planning', zh:'ÊïôËÇ≤‰∏éË¥¢ÂØå‰ø°ÊâòËßÑÂàí'}
];

let lang = localStorage.getItem('superedu-lang') || 'en';

/* Render checkboxes */
function renderServices(){
  const wrap = document.getElementById('servicesList');
  wrap.innerHTML = '';
  serviceItems.forEach(s=>{
    const text = lang==='en' ? s.en : s.zh;
    // value set to english key for consistent backend handling, but label text is localized
    wrap.innerHTML += `
      <label>
        <input type="checkbox" name="services" value="${s.en}">
        <span>${text}</span>
      </label>
    `;
  });
}

/* Language switching UI + behavior */
function setLang(l){
  lang = l;
  localStorage.setItem('superedu-lang',l);

  // update all elements that have data-en / data-zh
  document.querySelectorAll('[data-en]').forEach(el=>{
    // skip inputs / textareas placeholders (we could handle placeholders if needed)
    if(el.tagName==='INPUT' || el.tagName==='TEXTAREA') return;
    el.innerText = (l==='en') ? el.dataset.en : el.dataset.zh;
  });

  // Update submit button text specifically (in case innerText wasn't covered)
  const submitBtn = document.getElementById('submitBtn');
  if(submitBtn) submitBtn.innerText = (l==='en') ? submitBtn.dataset.en : submitBtn.dataset.zh;

  // render localized services list
  renderServices();

  // update language toggle button label to show opposite (UX choice)
  const langBtn = document.getElementById('langToggle');
  if(langBtn) langBtn.innerText = (l==='en') ? '‰∏≠Êñá' : 'EN';
}

/* Toggle language when user clicks the top button */
document.addEventListener('DOMContentLoaded', () => {
  // initialize UI
  setLang(lang);

  const langBtn = document.getElementById('langToggle');
  if(langBtn){
    // ensure label shows opposite language as the toggle (common pattern)
    langBtn.addEventListener('click', () => {
      const next = (lang === 'en') ? 'zh' : 'en';
      setLang(next);
    });
    // set initial label according to current language
    langBtn.innerText = (lang==='en') ? '‰∏≠Êñá' : 'EN';
  }

  // Hook: mobile hamburger toggling (simple)
  const hamburger = document.getElementById('hamburger');
  const mobileMenu = document.getElementById('mobileMenu');
  if(hamburger && mobileMenu){
    hamburger.addEventListener('click', () => {
      const expanded = hamburger.getAttribute('aria-expanded') === 'true';
      hamburger.setAttribute('aria-expanded', (!expanded).toString());
      if(expanded){
        mobileMenu.setAttribute('aria-hidden','true');
        hamburger.classList.remove('open');
      } else {
        mobileMenu.setAttribute('aria-hidden','false');
        hamburger.classList.add('open');
      }
    });

    // Close mobile menu when any menu link is clicked (helps UX)
    mobileMenu.querySelectorAll('a').forEach(a=>{
      a.addEventListener('click', ()=> {
        mobileMenu.setAttribute('aria-hidden','true');
        hamburger.setAttribute('aria-expanded','false');
        hamburger.classList.remove('open');
      });
    });
  }
});

/* initial render of services */
renderServices();

/* ===============================
      SUBMIT FORM
================================ */
document.getElementById('applyForm').addEventListener('submit', async e =>{
  e.preventDefault();

  // ---- Email format validation ----
  const email = document.getElementById('email').value.trim();
  const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if(!emailPattern.test(email)){
    alert(lang==='zh' ? "ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÈÇÆÁÆ±Âú∞ÂùÄ" : "Please enter a valid email address");
    return;
  }

  const status = document.getElementById('formStatus');
  status.innerText = lang==='en' ? 'Submitting...' : 'Êèê‰∫§‰∏≠...';

  const services = [...document.querySelectorAll('input[name="services"]:checked')]
        .map(i=>i.value);

  const payload = {
    firstName: document.getElementById('firstName').value.trim(),
    lastName: document.getElementById('lastName').value.trim(),
    email,
    phone: document.getElementById('phone').value.trim(),
    country: document.getElementById('country').value.trim(),
    services,
    notes: document.getElementById('notes').value.trim(),
    lang,
    source:'apply_form',
    created_at:new Date().toISOString()
  };

  try{
    const res = await fetch('/api/apply',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify(payload)
    });

    const out = await res.json();

    if(res.ok){
      window.location.href = '/thank-you.html';
    } else {
      status.innerText = out.message || (lang==='en'?'Submission failed':'Êèê‰∫§Â§±Ë¥•');
    }
  }catch(err){
    console.error(err);
    status.innerText = lang==='en'?'Submission failed':'Êèê‰∫§Â§±Ë¥•';
  }
});
</script>
</body>
</html>
