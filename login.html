<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Member Login ‚Äî SnovaEdu</title>

<!-- Icons -->
<link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16.png">
<link rel="icon" href="/assets/icons/favicon.ico">

<link rel="stylesheet" href="/assets/css/main.css">
<script src="/assets/js/menu.js" defer></script>
<script src="/assets/js/lang.js" defer></script>
<script src="/assets/js/access.js" defer></script>

<style>
/* =========================
   Login Page
========================= */

body.login-page {
  font-family: Inter, Arial, sans-serif;
  margin: 0;
}

/* Wrapper */
.login-wrap {
  max-width: 460px;
  margin: 120px auto 80px;
  padding: 0 20px;
}

/* Card */
.login-card {
  background: linear-gradient(
    135deg,
    #ffffff 0%,
    #fbf7ef 55%,
    #f3ebdd 100%
  );
  border-radius: 16px;
  padding: 32px;
  box-shadow: 0 14px 36px rgba(0,0,0,0.12);
  border: 1px solid rgba(160,140,110,0.25);
}

/* Title */
.login-title {
  text-align: center;
  margin-bottom: 22px;
}

.login-title h1 {
  margin: 0;
  font-size: 28px;
  font-weight: 400;
  color: var(--brand-2);
}

.login-title p {
  margin-top: 8px;
  font-size: 15px;
  color: #555;
}

/* Form */
.login-form {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.login-form label {
  font-size: 14px;
  color: #444;
}

.login-form input {
  padding: 11px 12px;
  border-radius: 8px;
  border: 1px solid #e1dccf;
  font-size: 14px;
  background: #fff;
}

.login-form input:focus {
  outline: none;
  border-color: var(--brand-2);
}

/* Button */
.login-form .btn {
  margin-top: 12px;
  width: 100%;
  transition: transform 0.18s ease;
}

.login-form .btn:hover {
  transform: scale(1.05);
}

/* Status */
.login-status {
  font-size: 14px;
  margin-top: 10px;
}

/* Footer hint */
.login-hint {
  text-align: center;
  font-size: 14px;
  margin-top: 18px;
  color: #666;
}

.login-hint a {
  color: var(--brand-2);
  text-decoration: none;
}

.login-hint a:hover {
  text-decoration: underline;
}

/* Password with eye icon */
.password-wrapper {
  position: relative;
}

.password-wrapper input {
  width: 100%;
  padding-right: 40px;
}

.toggle-password {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  cursor: pointer;
  font-size: 16px;
  opacity: 0.6;
  user-select: none;
}

.toggle-password:hover {
  opacity: 1;
}

/* =========================
   Login Card Hover (Desktop)
========================= */

@media (min-width: 769px) {
  .login-card {
    transition:
      transform 0.28s ease,
      box-shadow 0.28s ease,
      border-color 0.28s ease;
  }

  .login-card:hover {
    transform: translateY(-4px);
    box-shadow:
      0 20px 48px rgba(0,0,0,0.16),
      0 0 0 1px rgba(176,140,80,0.35); /* ÂìÅÁâå‰∫ÆÁ∫ø */
    border-color: rgba(176,140,80,0.6);
  }
}

/* =========================
   Login Button Hover
========================= */

.login-form .btn {
  transition:
    transform 0.2s ease,
    box-shadow 0.2s ease,
    filter 0.2s ease;
}

.login-form .btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 22px rgba(0,0,0,0.18);
  filter: brightness(1.06);
}


</style>
</head>

<body class="login-page">

<!-- NAV -->

<nav id="topNav" class="nav--transparent">
  <div class="nav-inner">

    <!-- Logo -->
    <div class="brand">
      <a href="/index.html#home" class="brand">
        <img src="/assets/img/superedu-logo.png" alt="Edunova" class="logo-img" />
        <span class="brand-text">Edunova</span>
      </a>
    </div>

    <!-- =========================
         Desktop Menu
    ========================== -->
    <div class="menu" id="menu">

      <!-- Home -->
      <a href="/index.html#home" data-en="Home" data-zh="È¶ñÈ°µ">Home</a>

      <!-- About -->
      <a href="/index.html#about" data-en="About" data-zh="ÂÖ≥‰∫éÊàë‰ª¨">About</a>

    <!-- Programs Dropdown -->
<div class="nav-item dropdown">

  <span class="dropdown-toggle"
        role="button"
        aria-haspopup="true"
        tabindex="0"
        data-en="Programs ‚¨áÔ∏é"
        data-zh="È°πÁõÆ ‚¨áÔ∏é"> 
  </span> 

  <div class="dropdown-menu">
    <a href="/education.html"
       id="navEduCenter"
       data-en="EduCenter"
       data-zh="ÊïôËÇ≤‰∏≠ÂøÉ">
      EduCenter
    </a>

    <a href="/community.html"
       id="navEduCommunity"
       data-en="EduCommunity"
       data-zh="ÊïôËÇ≤Á§æÂå∫">
      EduCommunity
    </a>

    <a href="/forum.html"
       id="navForum"
       data-en="EduForum"
       data-zh="ÊïôËÇ≤ËÆ∫Âùõ">
      EduForum 
    </a>

    <a href="/events.html" data-en="Events" data-zh="Ê¥ªÂä®"> Events</a>
    
  </div>

</div>

      <!-- Services -->
      <a href="/index.html#services" data-en="Services" data-zh="ÊúçÂä°">Services</a>

      <!-- Membership -->
     <a href="/membership.html" id="navMembership" data-en="Membership" data-zh="‰ºöÂëò‰∏≠ÂøÉ">Membership</a>

      <!-- Get Involved Dropdown -->
<div class="nav-item dropdown">
  <span class="dropdown-toggle" role="button" aria-haspopup="true" tabindex="0"
        data-en="Get Involved ‚¨áÔ∏é" data-zh="ÂèÇ‰∏éÊñπÂºè ‚¨áÔ∏é">
   
</span>

  <div class="dropdown-menu">
    <a href="/volunteer.html"
       data-en="Volunteer"
       data-zh="ÂøóÊÑøËÄÖ">
      Volunteer
    </a>

    <a href="/donation.html"
       data-en="Donation"
       data-zh="ÊçêËµ†">
      Donation
    </a>

    <a href="/index.html#resources"
       data-en="Resources"
       data-zh="ËµÑÊ∫ê">
      Resources
    </a>
  </div>
</div>

      <!-- Contact -->
      <a href="/index.html#contact" data-en="Contact" data-zh="ËÅîÁ≥ª">Contact</a>

      <!-- Login -->
     <a href="/login.html" id="desktopAuth" data-en="Login" data-zh="ÁôªÂΩï">Login</a>

      <!-- Slide underline -->
      <span class="nav-underline"></span>
    </div>

    <!-- Right side -->
    <div class="nav-right">
      <button id="langToggle" class="lang-toggle" aria-label="Language toggle">
        ‰∏≠Êñá
      </button>

      <button id="hamburger" class="hamburger" aria-label="Menu">
        <span></span><span></span><span></span>
      </button>
    </div>
  </div>

  <!-- Mobile slide menu -->
  <div id="mobileMenu" class="mobile-menu" aria-hidden="true">
    <!-- Home -->
    <a href="/index.html#home" data-en="Home" data-zh="È¶ñÈ°µ">Home</a>

    <!-- About -->
    <a href="/index.html#about" data-en="About" data-zh="ÂÖ≥‰∫éÊàë‰ª¨">About</a>

    <!-- Programs Accordion -->
    <details class="mobile-group">
      <summary data-en="Programs" data-zh="È°πÁõÆ">Programs</summary>
      <a href="/education.html" id="mobileEduCenter" data-en="EduCenter" data-zh="ÊïôËÇ≤‰∏≠ÂøÉ">EduCenter</a>
      <a href="/community.html" id="mobileEduCommunity" data-en="EduCommunity" data-zh="ÊïôËÇ≤Á§æÂå∫">EduCommunity</a>
      <a href="/forum.html" id="mobileForum" data-en="EduForum" data-zh="ÊïôËÇ≤ËÆ∫Âùõ">EduForum</a>
      <a href="/events.html" data-en="Events" data-zh="Ê¥ªÂä®">Events</a>
    </details>

    <!-- Service -->
    <a href="/index.html#services" data-en="Service" data-zh="ÊúçÂä°">Service</a>

    <!-- Membership -->
    <a href="/membership.html" id="mobileMembership" data-en="Membership" data-zh="‰ºöÂëò‰∏≠ÂøÉ">Membership</a>

    <!-- Get Involved Accordion -->
    <details class="mobile-group">
      <summary data-en="Get Involved" data-zh="ÂèÇ‰∏éÊñπÂºè">Get Involved</summary>
      <a href="/volunteer.html" data-en="Volunteer" data-zh="ÂøóÊÑøËÄÖ">Volunteer</a>
      <a href="/donation.html" data-en="Donation" data-zh="ÊçêËµ†">Donation</a>
      <a href="/index.html#resources" data-en="Resources" data-zh="ËµÑÊ∫ê">Resources</a>
    </details>

    <!-- Contact -->
    <a href="/index.html#contact" data-en="Contact" data-zh="ËÅîÁ≥ª">Contact</a>

    <!-- Login -->
    <a href="/login.html" id="mobileAuth" data-en="Login" data-zh="ÁôªÂΩï">Login</a>

    <!-- Mobile action buttons -->
    <div class="mobile-actions">
      <button class="btn btn-ghost" id="mobileRegister" data-en="Register/Join" data-zh="Ê≥®ÂÜå/Âä†ÂÖ•">
        Register / Join
      </button>
      <button class="btn" id="mobileUnlock" data-en="Unlock Education" data-zh="Ëß£ÈîÅÊïôËÇ≤">
        Unlock Education
      </button>
    </div>
  </div>
</nav>


<!-- MAIN -->
<div class="login-wrap">
  <div class="login-card">

    <div class="login-title">
      <h1 data-en="Member Login" data-zh="‰ºöÂëòÁôªÂΩï">Member Login</h1>
      <p data-en="Access your account and member resources."
         data-zh="ÁôªÂΩï‰ª•ËÆøÈóÆÊÇ®ÁöÑË¥¶Êà∑‰∏é‰ºöÂëòËµÑÊ∫ê„ÄÇ">
         Access your account and member resources.
      </p>
    </div>

    <form class="login-form" id="loginForm" autocomplete="off">

      <label for="login-email" data-en="Email" data-zh="ÈÇÆÁÆ±">Email</label>
      <input id="login-email" type="email" required placeholder="you@email.com">

      <div id="emailStatus" class="login-status"></div>


      <label for="login-password" data-en="Password" data-zh="ÂØÜÁ†Å">Password</label>

<div class="password-wrapper">
  <input id="login-password" type="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
  <span class="toggle-password" id="toggleLoginPassword" title="Show / Hide">
    üëÅ
  </span>
</div>


      <button type="submit" class="btn btn-primary"
        data-en="Login"
        data-zh="ÁôªÂΩï">
        Login
      </button>

      <div id="loginStatus" class="login-status"></div>
    </form>

    <div class="login-hint">
      <span data-en="New here?" data-zh="ËøòÊ≤°ÊúâË¥¶Êà∑Ôºü">New here?</span>
      <a href="/register.html"
         data-en="Create an account"
         data-zh="ÂàõÂª∫Ë¥¶Êà∑">
         Create an account
      </a>
    </div>

  </div>
</div>

<!-- LOGIN LOGIC -->
<script>
document.getElementById("loginForm").addEventListener("submit", function(e) {
  e.preventDefault();

  const email = document.getElementById("login-email").value.trim();
  const password = document.getElementById("login-password").value;
  const status = document.getElementById("loginStatus");

  if (!email || !password) {
  status.textContent = "Please enter email and password.";
  status.style.color = "#b45309";
  return;
}

if (!emailRegex.test(email)) {
  status.textContent = "Invalid email format.";
  status.style.color = "#dc2626";
  return;
}

  
});



const emailInput = document.getElementById("login-email");
const emailStatus = document.getElementById("emailStatus");
const passwordInput = document.getElementById("login-password");
const togglePassword = document.getElementById("toggleLoginPassword");

const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

/* Email real-time validation */
emailInput.addEventListener("input", () => {
  const val = emailInput.value.trim();

  if (!val) {
    emailStatus.textContent = "";
    return;
  }

  if (!emailRegex.test(val)) {
    emailStatus.textContent = "‚ùå Invalid email format";
    emailStatus.style.color = "#dc2626";
  } else {
    emailStatus.textContent = "";
  }
});

/* Toggle password visibility */
togglePassword.addEventListener("click", () => {
  const isHidden = passwordInput.type === "password";
  passwordInput.type = isHidden ? "text" : "password";
  togglePassword.textContent = isHidden ? "üôà" : "üëÅ";
});

document.getElementById("loginForm").addEventListener("submit", async function (e) {
  e.preventDefault();

  const email = document.getElementById("login-email").value.trim();
  const password = document.getElementById("login-password").value;
  const status = document.getElementById("loginStatus");

  if (!email || !password) {
    status.textContent = "Please enter email and password.";
    status.style.color = "#b45309";
    return;
  }

  if (!emailRegex.test(email)) {
    status.textContent = "Invalid email format.";
    status.style.color = "#dc2626";
    return;
  }

  status.textContent = "Logging in‚Ä¶";
  status.style.color = "#374151";

  try {
    const res = await fetch("/api/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      credentials: "include", // ‚≠ê ÈùûÂ∏∏ÂÖ≥ÈîÆ
      body: JSON.stringify({ email, password })
    });

    const data = await res.json();

    if (!res.ok) {
      status.textContent = data.error || "Login failed.";
      status.style.color = "#dc2626";
      return;
    }

    status.textContent = "Login successful. Redirecting‚Ä¶";
    status.style.color = "#15803d";

    setTimeout(() => {
      window.location.href = "/dashboard.html";
    }, 800);

  } catch (err) {
    status.textContent = "Network error. Please try again.";
    status.style.color = "#dc2626";
  }
});


(async function(){
  try{
    const res = await fetch("/api/me", { credentials:"include" });
    const data = await res.json();
    if(res.ok && data.success){
      location.replace("/dashboard.html");
    }
  }catch(e){}
})();


</script>

</body>
</html>
