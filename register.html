<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Create Account — SnovaEdu</title>

<!-- icons -->
<link rel="icon" href="/assets/icons/favicon.ico">

<!-- main styles -->
<link rel="stylesheet" href="/assets/css/main.css">

<!-- scripts -->
<script src="/assets/js/menu.js" defer></script>
<script src="/assets/js/lang.js" defer></script>

<style>
/* =========================
   Page Background
========================= */
body.register-page {
  font-family: Inter, Arial, sans-serif;
  margin: 0;
}

/* =========================
   Layout
========================= */
.register-wrap {
  max-width: 520px;
  margin: 120px auto 80px;
  padding: 0 20px;
}

.register-title {
  text-align: center;
  margin-bottom: 26px;
}

.register-title h1 {
  font-size: 34px;
  font-weight: 400;
  color: var(--brand-2);
  margin-bottom: 8px;
}

.register-title p {
  font-size: 16px;
  color: #555;
}

/* =========================
   Card
========================= */
.register-card {
  border-radius: 16px;
  padding: 30px;
  box-shadow: 0 10px 28px rgba(9,30,66,0.06);
  border: 1px solid rgba(10,10,10,0.04);
}

/* =========================
   Form
========================= */
.register-form {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.register-form label {
  font-size: 14px;
  color: #333;
}

.register-form input {
  padding: 11px 12px;
  border-radius: 8px;
  border: 1px solid #e2e2e2;
  font-size: 14px;
}

.register-form input:focus {
  outline: none;
  border-color: #3B82F6;
}

.form-note {
  font-size: 13px;
  color: #666;
  margin-top: 6px;
}

/* =========================
   Submit Button
========================= */
.register-form .btn {
  margin-top: 12px;
  transition: transform .2s ease, box-shadow .2s ease;
}

.register-form .btn:hover {
  transform: scale(1.04);
  box-shadow: 0 8px 18px rgba(59,130,246,0.25);
}

/* =========================
   Status
========================= */
.form-status {
  font-size: 13px;
  margin-top: 8px;
}

.form-status.error {
  color: #c0392b;
}

.form-status.success {
  color: #2e7d32;
}

/* =========================
   Footer helper text
========================= */
.register-footer {
  text-align: center;
  margin-top: 18px;
  font-size: 14px;
}

.register-footer a {
  color: var(--brand-2);
  text-decoration: underline;
}
</style>
</head>

<body class="register-page">

<!-- NAV (same as other pages) -->

<nav id="topNav" class="nav--transparent">
  <div class="nav-inner">
    <div class="brand">
      <a href="/index.html#home" class="brand">
        <img src="/assets/img/superedu-logo.png" alt="SnovaEdu" class="logo-img" />
        <span class="brand-text">SnovaEdu</span>
      </a>
    </div>

    <div class="menu" id="menu">
      <a href="/index.html#home" data-en="Home" data-zh="首页">Home</a>
      <a href="/index.html#services" data-en="Services" data-zh="服务">Services</a>
      <a href="/index.html#services" data-en="EduCenter" data-zh="教育中心">EduCenter</a>
      <a href="#" data-en="EduCommunity" data-zh="教育社区">EduCommunity</a>
      <a href="/membership.html" data-en="Membership" data-zh="会员">Membership</a>
      <a href="/index.html#resources" data-en="Resources" data-zh="资源">Resources</a>
      <a href="/index.html#contact" data-en="Contact" data-zh="联系">Contact</a>
      <a href="/login.html" data-en="Login" data-zh="登录">Login</a>
      <span class="nav-underline"></span>
    </div>

    <div class="nav-right">
      <button id="langToggle" class="lang-toggle">中文</button>
      <button id="hamburger" class="hamburger"><span></span><span></span><span></span></button>
    </div>
  </div>

  <div id="mobileMenu" class="mobile-menu" aria-hidden="true">
      <a href="/index.html#home" data-en="Home" data-zh="首页">Home</a>
      <a href="/index.html#services" data-en="Services" data-zh="服务">Services</a>
      <a href="/membership.html" data-en="EduCenter" data-zh="教育中心">EduCenter</a>
      <a href="/membership.html" data-en="EduCommunity" data-zh="教育社区">EduCommunity</a>
      <a href="/membership.html" data-en="Membership" data-zh="会员">Membership</a>
      <a href="/index.html#resources" data-en="Resources" data-zh="资源">Resources</a>
      <a href="/index.html#contact" data-en="Contact" data-zh="联系">Contact</a>
      <a href="/login.html" data-en="Login" data-zh="登录">Login</a>

      <div class="mobile-actions">
        <button class="btn btn-ghost" id="mobileRegister" data-en="Resiter/Join" data-zh="注册/加入">Register / Join</button>
        <button class="btn" id="mobileUnlock" data-en="Quick Unlock" data-zh="快速解锁">Unlock Education</button>
      </div>
  </div>
</nav>



<!-- MAIN -->
<div class="register-wrap">

  <div class="register-title">
    <h1 data-en="Create Your Account" data-zh="创建您的账户">Create Your Account</h1>
    <p data-en="Unlock full access to member-only resources and services."
       data-zh="解锁会员专属资源与服务。">
       Unlock full access to member-only resources and services.
    </p>
  </div>

  <div class="register-card">

    <form id="registerForm" class="register-form" autocomplete="off">

      <label data-en="First Name*" data-zh="名*">First Name*</label>
      <input type="text" id="firstName" required />

      <label data-en="Last Name*" data-zh="姓*">Last Name*</label>
      <input type="text" id="lastName" required />

      <label data-en="Email*" data-zh="邮箱*">Email*</label>
      <input type="email" id="email" required />

      <label data-en="Password*" data-zh="密码*">Password*</label>
      <input type="password" id="password" required />

      <label data-en="Confirm Password*" data-zh="确认密码*">Confirm Password*</label>
      <input type="password" id="confirmPassword" required />

      <button type="submit" class="btn btn-primary"
        data-en="Create Account" data-zh="创建账户">
        Create Account
      </button>

      <div id="formStatus" class="form-status"></div>

      <div class="form-note"
        data-en="Already have an account? Log in instead."
        data-zh="已有账户？直接登录。">
        Already have an account? Log in instead.
      </div>

    </form>

  </div>

  <div class="register-footer">
    <a href="/login.html" data-en="Go to Login" data-zh="前往登录">Go to Login</a>
  </div>

</div>



<script>
document.addEventListener("DOMContentLoaded", () => {

  const form = document.getElementById("registerForm");
  const status = document.getElementById("formStatus");

  const passwordInput = document.getElementById("password");

  /* ---------- Password Hint ---------- */
  const hint = document.createElement("div");
  hint.className = "password-hint";
  hint.innerHTML = `
    <strong>Password requirements:</strong><br>
    • At least 8 characters<br>
    • Must include letters and numbers
  `;
  hint.style.fontSize = "0.9em";
  hint.style.color = "#666";
  hint.style.marginTop = "6px";

  passwordInput.parentNode.appendChild(hint);

  /* ---------- Helpers ---------- */
  function isValidPassword(pw) {
    return pw.length >= 8 && /[A-Za-z]/.test(pw) && /[0-9]/.test(pw);
  }

  const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

  /* ---------- Submit ---------- */
  form.addEventListener("submit", async (e) => {
    e.preventDefault(); // ⛔ 必须拦截
    status.textContent = "";
    status.className = "form-status";

    const firstName = document.getElementById("firstName").value.trim();
    const lastName  = document.getElementById("lastName").value.trim();
    const email     = document.getElementById("email").value.trim();
    const password  = document.getElementById("password").value;
    const confirm   = document.getElementById("confirmPassword").value;

    /* ---------- Front-end Validation ---------- */
    if (!firstName || !lastName || !email || !password || !confirm) {
      status.textContent = "Please complete all required fields.";
      status.classList.add("error");
      return;
    }

    if (!emailPattern.test(email)) {
      status.textContent = "Please enter a valid email address (e.g. name@example.com).";
      status.classList.add("error");
      return;
    }

    if (password !== confirm) {
      status.textContent = "Passwords do not match.";
      status.classList.add("error");
      return;
    }

    if (!isValidPassword(password)) {
      status.textContent =
        "Password must be at least 8 characters and include both letters and numbers.";
      status.classList.add("error");
      return;
    }

    /* ---------- API ---------- */
    try {
      const res = await fetch("/api/member", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          action: "register",
          first_name: firstName,
          last_name: lastName,
          email,
          password
        })
      });

      const data = await res.json();

      if (!res.ok) {
        status.textContent = data.error || "Registration failed.";
        status.classList.add("error");
        return;
      }

      status.textContent = `Account created successfully. Your Member ID: ${data.member_id}`;
      status.classList.add("success");
      form.reset();

    } catch (err) {
      status.textContent = "Network error. Please try again.";
      status.classList.add("error");
    }
  });

});
</script>

</body>
</html>

