<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Create Account ‚Äî SnovaEdu</title>

<!-- icons -->
<link rel="icon" href="/assets/icons/favicon.ico">

<!-- main styles -->
<link rel="stylesheet" href="/assets/css/main.css">

<!-- scripts -->
<script src="/assets/js/menu.js" defer></script>
<script src="/assets/js/lang.js" defer></script>

<style>
/* =========================
   Page Background
========================= */
body.register-page {
  font-family: Inter, Arial, sans-serif;
  margin: 0;
}

/* =========================
   Layout
========================= */
.register-wrap {
  max-width: 520px;
  margin: 120px auto 80px;
  padding: 0 20px;
  padding-bottom: 64px;
}


.register-title {
  text-align: center;
  margin-bottom: 26px;
}

.register-title h1 {
  font-size: 34px;
  font-weight: 400;
  color: var(--brand-2);
  margin-bottom: 8px;
}

.register-title p {
  font-size: 16px;
  color: #555;
}

/* =========================
   Card
========================= */
.register-card {
  border-radius: 16px;
  padding: 30px;
  box-shadow: 0 10px 28px rgba(9,30,66,0.06);
  border: 1px solid rgba(10,10,10,0.04);
}

/* =========================
   Form
========================= */
.register-form {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.register-form label {
  font-size: 14px;
  color: #333;
}

.register-form input {
  padding: 11px 12px;
  border-radius: 8px;
  border: 1px solid #e2e2e2;
  font-size: 14px;
}

.register-form input:focus {
  outline: none;
  border-color: #3B82F6;
}

.form-note {
  font-size: 13px;
  color: #666;
  margin-top: 6px;
}


.password-hint {
  background-color: #fefcf5; /* ÊµÖÈªÑËâ≤Â∫ïËâ≤ */
  border-left: 4px solid #f4c430; /* ÈªÑËâ≤‰æßËæπÊù°ÔºåÂº∫Ë∞É */
  padding: 12px 16px;
  margin-bottom: 16px;
  border-radius: 8px;
  font-family: Inter, Arial, sans-serif;
}

.password-hint .hint-title {
  font-weight: 600;
  font-size: 1rem;        /* ÊØî‰πãÂâçÂ∞è‰∏ÄÁÇπ */
  margin-bottom: 6px;
  color: #333;
}

.password-hint .hint-list li {
  font-size: 0.92rem;     /* Ê≠£ÊñáÁï•Â∞è */
  line-height: 1.55;
  color: #555;
}


.password-hint .hint-list {
  margin: 0;
  padding-left: 20px;
  list-style-type: disc;
}

/* =========================
   Password Eye Toggle
========================= */

.password-wrapper {
  position: relative;
}

.password-wrapper input {
  width: 100%;
  padding-right: 42px;
}

.toggle-password {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  cursor: pointer;
  font-size: 18px;
  opacity: 0.6;
  user-select: none;
}

.toggle-password:hover {
  opacity: 1;
}

/* =========================
   Password Rules UX
========================= */

.password-hint {
  margin: 12px 0 18px;
  font-size: 14px;
  color: #5a4a3b;
}

.password-hint strong {
  display: block;
  font-size: 15px;
  margin-bottom: 6px;
}

.password-hint ul {
  padding-left: 18px;
  margin: 0;
}

.password-hint li {
  margin: 4px 0;
}

.password-hint li.valid {
  color: #2e7d32;
}

.password-hint li.invalid {
  color: #b71c1c;
}

.password-wrapper {
  position: relative;
}

.password-wrapper input {
  width: 100%;
  padding-right: 46px;
}

.toggle-password {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  cursor: pointer;
  font-size: 18px;
  opacity: 0.65;
  z-index: 10;               /* üî¥ ÈùûÂ∏∏ÂÖ≥ÈîÆ */
  pointer-events: auto;     /* üî¥ ÈùûÂ∏∏ÂÖ≥ÈîÆ */
}

.toggle-password:hover {
  opacity: 1;
}

.password-hint {
  margin-top: 6px;
  font-size: 13px;
  color: #555;
}

.password-hint .hint-title {
  font-weight: 600;
  font-size: 14px;
  margin-bottom: 4px;
}

.password-hint ul {
  padding-left: 0;
  margin: 0;
  list-style: none;
}

.password-hint li {
  display: flex;
  align-items: center;
  gap: 6px;
  margin: 2px 0;
}

.password-hint .icon {
  font-size: 13px;
  width: 14px;
}

/* Áä∂ÊÄÅ */
.password-hint li.valid {
  color: #1a7f37;
}

.password-hint li.valid .icon {
  content: "‚úî";
}

.password-hint li.invalid {
  color: #c62828;
}

/* ÂØÜÁ†Å / Á°ÆËÆ§ÂØÜÁ†Å ÊèêÁ§∫ÈÄöÁî®Ê†∑Âºè */
.password-hint,
.confirm-hint {
  gap: 8px;              /* ‚≠ê ÂÖ≥ÈîÆÔºöÊãâÂºÄ icon ‰∏éÊñáÂ≠óË∑ùÁ¶ª */
  margin-top: 6px;
  font-size: 13px;
}

/* icon Á®çÂæÆÁã¨Á´ã‰∏Ä‰∫õ */
.password-hint .icon,
.confirm-hint .icon {
  min-width: 16px;       /* Èò≤Ê≠¢Êå§Âéã */
}

/* =========================
   Submit Button
========================= */
.register-form .btn {
  margin-top: 12px;
  transition: transform .2s ease, box-shadow .2s ease;
}

.register-form .btn:hover {
  transform: scale(1.04);
  box-shadow: 0 8px 18px rgba(59,130,246,0.25);
}

/* =========================
   Status
========================= */
.form-status {
  font-size: 13px;
  margin-top: 8px;
}

.form-status.error {
  color: #c0392b;
}

.form-status.success {
  color: #2e7d32;
}

/* =========================
   Footer helper text
========================= */
.register-footer {
  text-align: center;
  margin-top: 18px;
  font-size: 14px;
}

.register-footer a {
  color: var(--brand-2);
  text-decoration: underline;
}

</style>
</head>

<body class="register-page">

<!-- NAV (same as other pages) -->

<nav id="topNav" class="nav--transparent">
  <div class="nav-inner">
    <div class="brand">
      <a href="/index.html#home" class="brand">
        <img src="/assets/img/superedu-logo.png" alt="Edunova" class="logo-img" />
        <span class="brand-text">EdunovaEdu</span>
      </a>
    </div>

    <div class="menu" id="menu">
      <a href="/index.html#home" data-en="Home" data-zh="È¶ñÈ°µ">Home</a>
      <a href="/index.html#services" data-en="Services" data-zh="ÊúçÂä°">Services</a>
      <a href="/index.html#services" data-en="EduCenter" data-zh="ÊïôËÇ≤‰∏≠ÂøÉ">EduCenter</a>
      <a href="#" data-en="EduCommunity" data-zh="ÊïôËÇ≤Á§æÂå∫">EduCommunity</a>
      <a href="/membership.html" data-en="Membership" data-zh="‰ºöÂëò">Membership</a>
      <a href="/index.html#resources" data-en="Resources" data-zh="ËµÑÊ∫ê">Resources</a>
      <a href="/index.html#contact" data-en="Contact" data-zh="ËÅîÁ≥ª">Contact</a>
      <a href="/logout.html" data-en="Logout" data-zh="ÁôªÂΩï">Logout</a>
      <span class="nav-underline"></span>
    </div>

    <div class="nav-right">
      <button id="langToggle" class="lang-toggle">‰∏≠Êñá</button>
      <button id="hamburger" class="hamburger"><span></span><span></span><span></span></button>
    </div>
  </div>

  <div id="mobileMenu" class="mobile-menu" aria-hidden="true">
      <a href="/index.html#home" data-en="Home" data-zh="È¶ñÈ°µ">Home</a>
      <a href="/index.html#services" data-en="Services" data-zh="ÊúçÂä°">Services</a>
      <a href="/membership.html" data-en="EduCenter" data-zh="ÊïôËÇ≤‰∏≠ÂøÉ">EduCenter</a>
      <a href="/membership.html" data-en="EduCommunity" data-zh="ÊïôËÇ≤Á§æÂå∫">EduCommunity</a>
      <a href="/membership.html" data-en="Membership" data-zh="‰ºöÂëò">Membership</a>
      <a href="/index.html#resources" data-en="Resources" data-zh="ËµÑÊ∫ê">Resources</a>
      <a href="/index.html#contact" data-en="Contact" data-zh="ËÅîÁ≥ª">Contact</a>
      <a href="/login.html" data-en="Login" data-zh="ÁôªÂΩï">Login</a>

      <div class="mobile-actions">
        <button class="btn btn-ghost" id="mobileRegister" data-en="Resiter/Join" data-zh="Ê≥®ÂÜå/Âä†ÂÖ•">Register / Join</button>
        <button class="btn" id="mobileUnlock" data-en="Quick Unlock" data-zh="Âø´ÈÄüËß£ÈîÅ">Unlock Education</button>
      </div>
  </div>
</nav>



<!-- MAIN -->
<div class="register-wrap">

  <div class="register-title">
    <h1 data-en="Create Your Account" data-zh="ÂàõÂª∫ÊÇ®ÁöÑË¥¶Êà∑">
      Create Your Account
    </h1>
    <p
      data-en="Unlock full access to member-only resources and services."
      data-zh="Ëß£ÈîÅ‰ºöÂëò‰∏ìÂ±ûËµÑÊ∫ê‰∏éÊúçÂä°„ÄÇ"
    >
      Unlock full access to member-only resources and services.
    </p>
  </div>

  <div class="register-card">

    <form id="registerForm" class="register-form" autocomplete="off">

      <!-- First Name -->
      <label for="firstName" data-en="First Name*" data-zh="Âêç*">First Name*</label>
      <input
        type="text"
        id="firstName"
        name="first_name"
        required
        placeholder="First name"
        data-en="First name"
        data-zh="ÂêçÂ≠ó"
      />

      <!-- Last Name -->
      <label for="lastName" data-en="Last Name*" data-zh="Âßì*">Last Name*</label>
      <input
        type="text"
        id="lastName"
        name="last_name"
        required
        placeholder="Last name"
        data-en="Last name"
        data-zh="ÂßìÊ∞è"
      />

      <!-- Email -->
      <label for="email" data-en="Email*" data-zh="ÈÇÆÁÆ±*">Email*</label>
      <input
        type="email"
        id="email"
        name="email"
        required
        placeholder="Email address"
        data-en="Email address"
        data-zh="ÁîµÂ≠êÈÇÆÁÆ±"
      />

      <!-- Password -->
      <label for="password" data-en="Password*" data-zh="ÂØÜÁ†Å*">Password*</label>
      <div class="password-wrapper">
        <input
          type="password"
          id="password"
          name="password"
          required
          placeholder="Create a password"
          data-en="Create a password"
          data-zh="ËÆæÁΩÆÂØÜÁ†Å"
        />
        <button
          type="button"
          class="toggle-password"
          data-target="password"
          aria-label="Toggle password visibility"
        >
          üëÅ
        </button>
      </div>

      <!-- Password Rules -->
      <div class="password-hint">
        <div
          class="hint-title"
          data-en="Password requirements:"
          data-zh="ÂØÜÁ†ÅËÆæÁΩÆË¶ÅÊ±ÇÔºö"
        >
          Password requirements:
        </div>

        <ul>
          <li id="rule-length">
            <span class="icon">‚úñ</span>
            <span
              data-en="At least 8 characters"
              data-zh="Ëá≥Â∞ë 8 ‰ΩçÂ≠óÁ¨¶"
            >
              At least 8 characters
            </span>
          </li>

          <li id="rule-letter">
            <span class="icon">‚úñ</span>
            <span
              data-en="Include at least one letter (A‚ÄìZ)"
              data-zh="Ëá≥Â∞ëÂåÖÂê´ 1 ‰∏™Ëã±ÊñáÂ≠óÊØç"
            >
              Include at least one letter (A‚ÄìZ)
            </span>
          </li>

          <li id="rule-number">
            <span class="icon">‚úñ</span>
            <span
              data-en="Include at least one number (0‚Äì9)"
              data-zh="Ëá≥Â∞ëÂåÖÂê´ 1 ‰∏™Êï∞Â≠ó"
            >
              Include at least one number (0‚Äì9)
            </span>
          </li>
        </ul>
      </div>

      <!-- Confirm Password -->
      <label
        for="confirmPassword"
        data-en="Confirm Password*"
        data-zh="Á°ÆËÆ§ÂØÜÁ†Å*"
      >
        Confirm Password*
      </label>
      <div class="password-wrapper">
        <input
          type="password"
          id="confirmPassword"
          required
          placeholder="Confirm your password"
          data-en="Confirm your password"
          data-zh="ÂÜçÊ¨°ËæìÂÖ•ÂØÜÁ†Å"
        />
        <button
          type="button"
          class="toggle-password"
          data-target="confirmPassword"
          aria-label="Toggle password visibility"
        >
          üëÅ
        </button>
      </div>

      <div id="confirmHint" class="password-hint" style="display:none;">
        <span class="icon">‚ùå</span>
        <span
          class="text"
          data-en="Passwords do not match"
          data-zh="‰∏§Ê¨°ËæìÂÖ•ÁöÑÂØÜÁ†Å‰∏ç‰∏ÄËá¥"
        >
          Passwords do not match
        </span>
      </div>

      <!-- Referral Code -->
      <label for="referral_code"
       data-en="Referral Code (optional)"
       data-zh="Êé®ËçêÁ†ÅÔºàÂèØÈÄâÔºâ">
  Referral Code <span class="optional">(optional)</span>
</label>

<input
  type="text"
  id="referral_code"
  name="referral_code"
  placeholder="Enter referral code if you have one"
    data-en="Enter referral code if you have one"
    data-zh="Â¶ÇÊúâÊé®ËçêÁ†ÅËØ∑ËæìÂÖ•"
  autocomplete="off"
/>

      <!-- Submit -->
      <button
        type="submit"
        class="btn btn-primary"
        data-en="Create Account"
        data-zh="ÂàõÂª∫Ë¥¶Êà∑"
      >
        Create Account
      </button>

      <div id="formStatus" class="form-status"></div>

      <div
        class="form-note"
        data-en="Already have an account? Log in instead."
        data-zh="Â∑≤ÊúâË¥¶Êà∑ÔºüÁõ¥Êé•ÁôªÂΩï„ÄÇ"
      >
        Already have an account? Log in instead.
      </div>

    </form>

  </div>

  <div class="register-footer">
    <a href="/login.html" data-en="Go to Login" data-zh="ÂâçÂæÄÁôªÂΩï">
      Go to Login
    </a>
  </div>

</div>

<script>
document.addEventListener("DOMContentLoaded", () => {

  const form          = document.getElementById("registerForm");
  const status        = document.getElementById("formStatus");
  const passwordInput = document.getElementById("password");
  const confirmInput  = document.getElementById("confirmPassword");
  const confirmHint   = document.getElementById("confirmHint");

  /* =========================
     Password Rule Definition
  ========================= */
  const passwordRules = {
    length: {
      el: document.getElementById("rule-length"),
      test: pw => pw.length >= 8
    },
    letter: {
      el: document.getElementById("rule-letter"),
      test: pw => /[A-Za-z]/.test(pw)
    },
    number: {
      el: document.getElementById("rule-number"),
      test: pw => /[0-9]/.test(pw)
    }
  };

  function isValidPassword(pw) {
    return Object.values(passwordRules).every(rule => rule.test(pw));
  }

  /* =========================
     Password Live Validation
  ========================= */
  passwordInput.addEventListener("input", () => {
    const pw = passwordInput.value;

    Object.values(passwordRules).forEach(rule => {
      const ok = rule.test(pw);
      rule.el.classList.toggle("valid", ok);
      rule.el.classList.toggle("invalid", !ok);
      rule.el.querySelector(".icon").textContent = ok ? "‚úî" : "‚úñ";
    });

    checkConfirmPassword();
  });

  function checkConfirmPassword() {
    const pw  = passwordInput.value;
    const cpw = confirmInput.value;

    if (!cpw) {
      confirmHint.style.display = "none";
      return;
    }

    confirmHint.style.display = "flex";
    const match = pw === cpw;

    confirmHint.classList.toggle("valid", match);

    const icon = confirmHint.querySelector(".icon");
    const text = confirmHint.querySelector(".text");

    if (match) {
      icon.textContent = "‚úî ";
      text.textContent = text.dataset.en === "Passwords do not match"
        ? "Passwords match"
        : text.textContent;
      text.dataset.en = "Passwords match";
      text.dataset.zh = "‰∏§Ê¨°ËæìÂÖ•ÁöÑÂØÜÁ†Å‰∏ÄËá¥";
    } else {
      icon.textContent = "‚ùå ";
      text.dataset.en = "Passwords do not match";
      text.dataset.zh = "‰∏§Ê¨°ËæìÂÖ•ÁöÑÂØÜÁ†Å‰∏ç‰∏ÄËá¥";
    }
  }

  confirmInput.addEventListener("input", checkConfirmPassword);

  /* =========================
     Toggle Password Visibility
  ========================= */
  document.querySelectorAll(".toggle-password").forEach(btn => {
    btn.addEventListener("click", () => {
      const input = document.getElementById(btn.dataset.target);
      const hidden = input.type === "password";
      input.type = hidden ? "text" : "password";
      btn.textContent = hidden ? "üôà" : "üëÅ";
    });
  });

  /* =========================
     Submit
  ========================= */
  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    status.textContent = "";
    status.className = "form-status";

    const first_name    = document.getElementById("firstName").value.trim();
    const last_name     = document.getElementById("lastName").value.trim();
    const email         = document.getElementById("email").value.trim();
    const password      = passwordInput.value;
    const confirm       = confirmInput.value;
    const referral_code = document.getElementById("referral_code")?.value.trim() || null;

    if (!first_name || !last_name || !email || !password || !confirm) {
      status.textContent = "Please complete all required fields.";
      status.className = "form-status error";
      return;
    }

    if (!isValidPassword(password)) {
      status.textContent =
        "Password must be at least 8 characters and include letters and numbers.";
      status.className = "form-status error";
      return;
    }

    if (password !== confirm) {
      status.textContent = "Passwords do not match.";
      status.className = "form-status error";
      return;
    }

    try {
      status.textContent = "Creating your account‚Ä¶";
      status.className = "form-status loading";

      const res = await fetch("/api/member", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          first_name,
          last_name,
          email,
          password,
          referral_code
        })
      });

      const data = await res.json();

      if (!res.ok) {
        status.textContent = data.error || "Registration failed.";
        status.className = "form-status error";
        return;
      }

      status.innerHTML = `
        Account created successfully.<br>
        <strong>Your Member ID:</strong> ${data.member_id}<br>
        Redirecting‚Ä¶
      `;
      status.className = "form-status success";

      status.innerHTML = `
  Account created successfully.<br>
  <strong>Your Member ID:</strong> ${data.member_id}<br><br>
  üìß Please check your email to verify your account before logging in.
`;
status.className = "form-status success";

    } catch (err) {
      status.textContent = "Network error. Please try again.";
      status.className = "form-status error";
    }
  });

});
</script>

</body>
</html>

